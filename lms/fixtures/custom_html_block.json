[
 {
  "docstatus": 0,
  "doctype": "Custom HTML Block",
  "html": "<div class=\"lms-course-container\">\n  <h2>Available Courses</h2>\n  <div id=\"course-container\" class=\"batch-container\">\n  </div>\n</div>\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css\">\n",
  "modified": "2024-12-19 11:12:41.743552",
  "name": "Course List",
  "private": 0,
  "roles": [],
  "script": "function formatTimeTo12Hour(timeString) {\n  if (!timeString) return 'N/A';\n  const [hours, minutes] = timeString.split(':');\n  const period = hours >= 12 ? 'PM' : 'AM';\n  const formattedHours = hours % 12 || 12; // Convert 0 to 12 for midnight\n  return `${formattedHours}:${minutes} ${period}`;\n}\nfrappe.call({\n  method: \"lms.api.api.get_lms_batches\", // Update method path to match your app/module\n  callback: function (response) {\n    const batches = response.message;\n    const batchContainer = root_element.querySelector(\".batch-container\");\n\n    if (batches && batches.length > 0) {\n      batchContainer.innerHTML = \"\"; \n      batches.forEach(batch => {\n        const startTime = formatTimeTo12Hour(batch.start_time);\n        const endTime = formatTimeTo12Hour(batch.end_time);\n        let buttonHTML = \"\";\n\n        // Check batch status\n        // if (batch.status === \"In Progress\") {\n        //   buttonHTML = `<button class=\"enroll-button\" disabled>Batch In Progress</button>`;\n        // } else if (batch.status === \"Approved\") {\n        //   buttonHTML = `<button class=\"enroll-button\" onclick=\"window.location.href='http://rhrms.localhost:8001/app/student-registration'\">Enroll Now</button>`;\n        // }\n\n          const batchCard = `\n          <div class=\"course-card\">\n            <div class=\"card-header\">\n              <img \n                src=\"${batch.meta_image || '/assets/default-batch-image.jpg'}\" \n                alt=\"Batch Image\" \n                class=\"course-image\" \n                onerror=\"this.onerror=null;this.src='/assets/default-batch-image.jpg';\" \n              >\n            </div>\n            <div class=\"card-body\">\n              <h3 class=\"course-title\">${batch.title || 'No Title'}</h3>\n              <p class=\"course-details\"><strong>Batch Details:</strong> ${batch.batch_details || 'No details available.'}</p>\n              <p class=\"course-date\"><strong>Seat:</strong> ${batch.seat_count || 'N/A'}</p>\n              <p class=\"course-date\"><strong>Date:</strong> ${batch.start_date || 'N/A'} to ${batch.end_date || 'N/A'}</p>\n              <p class=\"course-time\"><strong>Time:</strong> ${startTime || 'N/A'} to ${endTime || 'N/A'}</p>\n            </div>\n            <div class=\"card-footer\">\n          <button class=\"enroll-button\" onclick=\"window.location.href='app/student-registration'\">Enroll Now</button>\n            </div>\n          </div>\n        `;\n        batchContainer.innerHTML += batchCard;\n      });\n    } else {\n      batchContainer.innerHTML = \"<p>No batches available at the moment.</p>\";\n    }\n  },\n  error: function (err) {\n    const batchContainer = root_element.querySelector(\".batch-container\");\n    batchContainer.innerHTML = \"<p>Unable to fetch batches. Please try again later.</p>\";\n    // console.error(\"Error fetching batches:\", err);\n  }\n});\n\n",
  "style": ".course-card {\n  width: 300px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.course-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);\n}\n\n.card-header {\n  width: 100%;\n  height: 180px;\n  overflow: hidden;\n}\n\n.course-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.card-body {\n  padding: 16px;\n}\n\n.course-title {\n  font-size: 1.2em;\n  margin-bottom: 8px;\n  color: #333;\n}\n\n.course-details, .course-duration, .course-time {\n  font-size: 0.9em;\n  color: #666;\n  margin-bottom: 12px;\n}\n\n.card-footer {\n  padding: 16px;\n  text-align: center;\n  background-color: #f9f9f9;\n}\n\n.enroll-button {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 4px;\n  background-color: #007bff;\n  color: #fff;\n  font-size: 1em;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.enroll-button:hover {\n  background-color: #0056b3;\n}\n\n\n"
 }
]